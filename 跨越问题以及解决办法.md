# 跨越

跨域（Cross-Origin）是指浏览器在一个网页中加载或请求另一个不同来源（域名、协议或端口）的资源或数据的行为。由于安全原因，浏览器实施了同源策略（Same-Origin Policy），限制了跨域请求，防止恶意网站获取和操作不属于它们的数据。

**同源策略**:要求js代码的交互资源对象一定是和自己**同协议**（http，https...），**同主机**，**同端口**

一般前端的ajax是不能跨越去请求数据资源的。

### 解决办法

### 1.JSONP（古老）

既然用ajax有同源策略限制我就不用了，我改用<script src:> 来访问数据，思路是这样的，浏览器并不对Script标签做同源策略，而且<script src="资源地址"> 可以去获取js代码且自动执行，所以服务器就可给他这样一个js代码，并把数据封装进去。这样服务器拿到js代码的时候就可以获得到数据了。

客户端定义一个函数` callback（data）`参数就是我想要的数据，再用script src去访问服务器路径的js代码` callback （{"name":"小明","age": 2 }）` 服务器就会执行这个js代码，也就是我我们刚刚定义的函数，只不过服务器帮我们把数据填进去了。

代码示例：

客户端:

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>client</title>
</head>
<body>
<span id="text">数据</span>
<script>
    function callback(data) {
        console.log(data);
        document.getElementById("text").innerText = data.name + "," + data.age;
    }
</script>
<script src="http://localhost:8088/cross" type="text/javascript"></script>
<script src="http://localhost:8088/print" type="text/javascript"></script>
</body>
</html>
```

服务端

```java
@ResponseBody
    @RequestMapping("/cross")
    public String returnData(){
        String data = "callback({\"name\" : '小明', \"age\" : 30})";
        return data;
    }
```

这样就可以跨域得到资源了
